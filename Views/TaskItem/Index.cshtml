@model List<TaskItem>
@using Microsoft.AspNetCore.Identity
@inject UserManager<ReadyTaskUser> UserManager

@{
    var user = await UserManager.GetUserAsync(User);

    <h2>Tasks</h2>
    if (UserManager.IsInRoleAsync(user, "Admin").Result ||
        UserManager.IsInRoleAsync(user, "Manager").Result)
    {
        <a asp-action="Create">Create Task</a>
    }

    <br />

    @if (Model.Count() > 0)
    {
        <table class="table table-hover task-list">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Priority</th>
                </tr>
            </thead>
            <tbody>
                @foreach (TaskItem task in Model)
                {
                    <tr class="@Enum.GetName(typeof(TaskItemStatus), task.StatusId)" onclick="location.href='@Url.Action("Details", "TaskItem", new { Id = task.Id })'">
                        <td>
                            @task.Title
                        </td>
                        <td>@task.Description</td>
                        <td>@Enum.GetName(typeof(TaskItemPriority), task.PriorityId)</td>

                    </tr>

                }
            </tbody>

        </table>

    }
    else
    {
        <h3 class="">No tasks exist...</h3>
    }

}